////////////////////////////////////////
// ▄▀█ █░░ ▄▀█ █▀█ █▄░█ █ ▄▀█ █▄░█
// █▀█ █▄▄ █▀█ █▀▀ █░▀█ █ █▀█ █░▀█
// 🅢🅐🅢🅢 🅜🅞🅓🅤🅛🅔🅢
// 
// (c) Copyright 2025 Alapnian
// (/) Developed by Alapnian Sass Dev
////////////////////////////////////////
@charset 'UTF-8';

@use "sass:meta";
@use "sass:map";
@use "parameter";
@use "internal/message";

///
/// Returns an error message stating a parameter received the wrong type.
/// 
/// @param  {String}        $context    - The name of the function issuing the error.
/// @param  {String}        $name       - The name of the parameter which has received the wrong type.
/// @param  {*}             $value      - The value which was received.
/// @param  {ArgList<*>}    $types      - The types which are expected.
/// @param  {String}        $message    - The additional message which describes the issue. Must be passed by name.
/// @param  {Bool|'warn'}   $catch      - Optionally catch errors and return them as values without stopping compilation.
/// @return {String}        - A string describing what types are acceptable for a parameter and the value that is invalid.
/// 
/// @group  API
/// @access public
/// 
/// @require    {Function}  meta.keywords
/// @require    {Function}  meta.variable-exists
/// @require    {Function}  map.has-key
/// @require    {Function}  map.get
/// @require    {Function}  message.invalid-type
/// @require    {Function}  parameter.parameter
/// 
@function parameter-type($context, $name, $value, $types...) {
    $keywords: meta.keywords($types);

    $message: if(map.has-key($keywords, 'message'), map.get($keywords, 'message'), null);
    $catch: if(map.has-key($keywords, 'catch'), map.get($keywords, 'catch'), if(meta.variable-exists('catch-error'), $catch-error, false));

    @return parameter.parameter(message.invalid-type($types, $value, $message), $context, $name, $catch);
}

///
/// Alias function name of throw.parameter-type
/// 
/// @group  API
/// @access public
/// 
/// @require    {Function}  meta.keywords
/// @require    {Function}  meta.variable-exists
/// @require    {Function}  map.has-key
/// @require    {Function}  map.get
/// @require    {Function}  message.invalid-type
/// @require    {Function}  parameter.parameter
/// 
@function parameter-type-exception($context, $name, $value, $types...) {
    $keywords: meta.keywords($types);

    $message: if(map.has-key($keywords, 'message'), map.get($keywords, 'message'), null);
    $catch: if(map.has-key($keywords, 'catch'), map.get($keywords, 'catch'), if(meta.variable-exists('catch-error'), $catch-error, false));

    @return parameter.parameter(message.invalid-type($types, $value, $message), $context, $name, $catch);
}

///
/// Output an error message stating a parameter received the wrong type.
/// 
/// @param  {String}        $context    - The name of the mixin issuing the error.
/// @param  {String}        $name       - The name of the parameter which has received the wrong type.
/// @param  {*}             $value      - The value which was received.
/// @param  {ArgList<*>}    $types      - The types which are expected.
/// @param  {String}        $message    - The additional message which describes the issue. Must be passed by name.
/// @param  {Bool|'warn'}   $catch      - Optionally catch errors and return them as values without stopping compilation.
/// 
/// @output A string describing what types are acceptable for a parameter and the value that is invalid.
/// 
/// @group  API
/// @access public
/// 
/// @require    {Function}  meta.keywords
/// @require    {Function}  meta.variable-exists
/// @require    {Function}  map.has-key
/// @require    {Function}  map.get
/// @require    {Function}  message.invalid-type
/// @require    {Mixin}     parameter.parameter
/// 
@mixin parameter-type($context, $name, $value, $types...) {
    $keywords: meta.keywords($types);

    $message: if(map.has-key($keywords, 'message'), map.get($keywords, 'message'), null);
    $catch: if(map.has-key($keywords, 'catch'), map.get($keywords, 'catch'), if(meta.variable-exists('catch-error'), $catch-error, false));

    @include parameter.parameter(message.invalid-type($types, $value, $message), $context, $name, $catch);
}

///
/// Alias mixin name of throw.parameter-type
/// 
/// @group  API
/// @access public
/// 
/// @require    {Function}  meta.keywords
/// @require    {Function}  meta.variable-exists
/// @require    {Function}  map.has-key
/// @require    {Function}  map.get
/// @require    {Function}  message.invalid-type
/// @require    {Mixin}     parameter.parameter
/// 
@mixin parameter-type-exception($context, $name, $value, $types...) {
    $keywords: meta.keywords($types);

    $message: if(map.has-key($keywords, 'message'), map.get($keywords, 'message'), null);
    $catch: if(map.has-key($keywords, 'catch'), map.get($keywords, 'catch'), if(meta.variable-exists('catch-error'), $catch-error, false));

    @include parameter.parameter(message.invalid-type($types, $value, $message), $context, $name, $catch);
}